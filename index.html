<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì œë¬¼í¬ê¶Œ ì˜ë¬´ê¶í™” ì±Œë¦°ì§€</title>

<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png" sizes="192x192">
<link rel="icon" href="icon-512.png" sizes="512x512">
<link rel="apple-touch-icon" href="icon-192.png">
<meta name="theme-color" content="#1976d2">

<link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;}

body{
  font-family:"ë§‘ì€ ê³ ë”•", sans-serif;
  text-align:center;
  margin:0;
  padding:10px;
  background:#e3f2fd;
  background-image:
    radial-gradient(circle at 10px 10px,#fff 2px,transparent 3px),
    radial-gradient(circle at 30px 30px,#fff 2px,transparent 3px);
  background-size:40px 40px;
}

/* ì œëª© ì˜ì—­ */
.title-wrap{
  position:relative;
  display:inline-block;
  margin-top:10px;
}

/* ì œë¬¼í¬ê¶Œ (ê·¸ëŒ€ë¡œ ìœ ì§€) */
.top-center{
  font-family:'Poor Story', cursive;
  font-size:16px;
  font-weight:bold;
  white-space:nowrap;
}

/* â¬‡ï¸ ì „ì²´ ë°˜ ì¹¸ ìœ„ë¡œ */
.shift-up{
  margin-top:-8px; /* ë°˜ ì¹¸ */
}

/* ë©”ì¸ ì œëª© */
.main-title{
  font-family:'Poor Story', cursive;
  font-size:26px;
  font-weight:bold;
  margin-top:4px;
  margin-bottom:6px;
}

/* ê¸°ê°„ */
.sub-title{
  font-family:'Poor Story', cursive;
  font-size:16px;
  font-weight:bold;
}

.period-title{color:#2e7d32;}
.date-strong{
  color:#1976d2;
  font-weight:bold;
  text-decoration:underline;
}

/* ì´ë¦„ ì…ë ¥ */
.name-box{
  margin:16px 0;
  display:flex;
  justify-content:center;
}

.name-wrap{
  display:flex;
  align-items:center;
  background:#fff;
  border:2px solid #ffd27d;
  border-radius:14px;
  padding:6px 10px;
  width:140px;          /* âœ… ê¸°ì¡´ ëŒ€ë¹„ ë°˜ìœ¼ë¡œ */
}

.flower{
  font-size:18px;
  margin-right:4px;
}

.name-input{
  flex:1;
  border:none;
  outline:none;
  font-size:14px;
  min-width:60px;
  padding:4px;
  background:#fff;
}

/* ì•ˆë‚´ */
.guide{font-size:13px;}

/* ë¹™ê³ íŒ */
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:1px;
  background:#fff;
  width:90vw;
  max-width:420px;
  margin:15px auto;
  aspect-ratio:1/1;
  border-radius:18px;
  overflow:hidden;
}

.cell{
  position:relative;
  background:#f8bbd0;
  cursor:pointer;
  font-size:12px;
  line-height:1.2;
  display:flex;
  align-items:center;
  justify-content:center;
}

.text-box{
  position:absolute;
  top:12%;
  width:90%;
  text-align:center;
}

.title{font-weight:800;margin-bottom:6px;}
.subline,.third{margin:0;}

.cell.open{
  color:transparent;
  background-image:url("flower2.jpg");
  background-size:400% 400%;
  background-repeat:no-repeat;
}

/* ê½ƒì */
.petal{
  position:absolute;
  width:8px;
  height:8px;
  background:radial-gradient(circle,#ff5f8f,#ffc1d9);
  border-radius:50% 50% 50% 0;
  transform:rotate(45deg);
  pointer-events:none;
  animation:float 1s ease-out forwards;
}

@keyframes float{
  0%{transform:scale(0.4);opacity:1;}
  100%{transform:translate(var(--x),var(--y)) scale(1.2);opacity:0;}
}

/* í•˜ë‹¨ ì•ˆë‚´ */
.notice{
  font-size:15px;
  margin-top:10px;
  line-height:1.25;
}

.notice-date{
  color:#1976d2;
  font-weight:bold;
  text-decoration:underline;
}
.notice-strong{font-weight:bold;}
</style>
</head>

<body>

<div class="title-wrap">
  <div class="top-center">&lt;ì œë¬¼í¬ê¶Œ&gt;</div>

  <div class="shift-up">

    <div class="main-title">ğŸŒ¸ (ì˜)ë¬´ê¶í™”ê½ƒì´ í”¼ì—ˆìŠµë‹ˆë‹¤ ğŸŒ¸</div>

    <div class="sub-title">
      <span class="period-title">ë¹™ê³ íŒ ì™„ì„±ê¸°ê°„ :</span>
      <span class="date-strong">1/26(ì›”) ~ 2/25(ìˆ˜)</span>
    </div>

    <div class="name-box">
      <div class="name-wrap">
        <div class="flower">ğŸŒ·</div>
        <input class="name-input" id="nameInput" placeholder="ì´ë¦„ì…ë ¥">
      </div>
    </div>

    <p class="guide">
      ì¹¸ì„ ëˆŒëŸ¬ ë„ì „ê³¼ì œë¥¼ ì™„ë£Œí•´ ë³´ì„¸ìš”. ëª¨ë‘ ì—´ë¦¬ë©´ ê½ƒì´ ì™„ì„±ë¼ìš” ğŸŒ¸
    </p>

    <div class="grid" id="grid"></div>

    <div class="notice">
      ë¹™ê³  3ì¤„ ì™„ì„± ì‹œ ì†Œì •ì˜ ìƒí’ˆì„ ë“œë¦½ë‹ˆë‹¤<br>
      <span class="notice-date">2ì›” 25ì¼ 12ì‹œ</span>
      <span class="notice-strong">ì°½ì¶˜êµë¥˜íšŒ</span> ë•Œ ë³´ì—¬ì£¼ì„¸ìš”
    </div>

  </div>
</div>

<script>
const missions=[
 ["ìŠ¤ë§ˆì¼ DAY","ê°€ì¡±ì—ê²Œ","3ê°€ì§€ ì¹­ì°¬í•˜ê¸°"],
 ["ì°½ì œ DAY","í‰ì†Œ","ì°½ì œì‹œê°„ì—<br>+10ë¶„"],
 ["ì˜¤.ìš´.ì™„.","ì˜¤ëŠ˜ ìš´ë™ ì™„ë£Œ","(ì‚°ì±…, ìŠ¤íŠ¸ë ˆì¹­<br>OK)"],
 ["ë•¡ìŠ¤ íˆ¬ â™¡","ì˜¤ëŠ˜ ê°ì‚¬í•œ ì¼","3ê°€ì§€ ì ì–´ë³´ê¸°"],
 ["SDG's DAY","ì˜¤ëŠ˜ ì¼íšŒìš©í’ˆ","ì‚¬ìš©ê¸ˆì§€"],
 ["'ë‚˜'ë¥¼ ìœ„í•œ DAY","ë‚˜ ìì‹ ","ì¹­ì°¬í•´ì£¼ê¸°"],
 ["ìš°í˜¸ DAY","ì¹¸ë‚˜í™œë™","ì‹¤ì²œ"],
 ["ì¢Œë‹´íšŒ DAY","'ë‚˜ì˜ì²­ë…„' ë°","ê°€ì¡±ê³¼ í•¨ê»˜<br>ì¢Œë‹´íšŒ ì°¸ì„"],
 ["ìš°í˜¸ DAY","ì˜ë¬´ê¶í™”ì—ê²Œ<br>ìŠ¤í”¼ì¹˜ ì „í•˜ê¸°","(íšŒì›,íšŒìš°)"],
 ["ìŠ¹ë¦¬ DAY","ì˜¤ëŠ˜ í•˜ë£¨","ì‹ .í–‰.í•™<br>ìŠ¹ë¦¬í•˜ê¸°"],
 ["í—ˆê·¸ DAY","ì‚¬ë‘í•˜ëŠ” ê°€ì¡±","ê¼­~ì•ˆì•„ì£¼ê¸°"],
 ["'ë‚˜'ë¥¼ ìœ„í•œ DAY","ì˜¤ëŠ˜ ì¸ìŠ¤í„´íŠ¸","ìŒì‹ ì•ˆë¨¹ê¸°"],
 ["ë„ì „ DAY","í•˜ê¸° ì‹«ì€ ì¼","ì¦ê²ê²Œ<br>ë„ì „í•´ë³´ê¸°"],
 ["í•´ë°© DAY","ì˜¤ëŠ˜ í•˜ë£¨","ì”ì†Œë¦¬ ê¸ˆì§€"],
 ["ì˜ë¬´ê¶í™” DAY","ì„ ë°°ì™€ í•¨ê»˜","ì˜ë¬´ê¶í™”<br>í™œë™í•˜ê¸°"],
 ["ì‚¬ì œ DAY","ì‹ ì¸ê°„í˜ëª…","2ê¶Œ 5í˜ì´ì§€<br>ì½ê¸°"]
];

const grid=document.getElementById("grid");
const savedOpen=JSON.parse(localStorage.getItem("openCells")||"[]");

missions.forEach((arr,i)=>{
  const cell=document.createElement("div");
  cell.className="cell";

  const box=document.createElement("div");
  box.className="text-box";
  box.innerHTML=`
    <div class="title">${arr[0]}</div>
    <div class="subline">${arr[1]}</div>
    <div class="third">${arr[2]}</div>
  `;
  cell.appendChild(box);

  const r=Math.floor(i/4), c=i%4;
  if(savedOpen.includes(i)){
    cell.classList.add("open");
    cell.style.backgroundPosition=`${c*33.33}% ${r*33.33}%`;
  }

  cell.onclick=()=>{
    cell.classList.toggle("open");
    let now=JSON.parse(localStorage.getItem("openCells")||"[]");
    if(cell.classList.contains("open")){
      cell.style.backgroundPosition=`${c*33.33}% ${r*33.33}%`;
      if(!now.includes(i)) now.push(i);
      sparkle(cell);
    }else{
      now=now.filter(v=>v!==i);
    }
    localStorage.setItem("openCells",JSON.stringify(now));
  };
  grid.appendChild(cell);
});

/* ì´ë¦„ ì €ì¥ */
const nameInput=document.getElementById("nameInput");
nameInput.value=localStorage.getItem("savedName")||"";
nameInput.addEventListener("input",()=>{
  localStorage.setItem("savedName",nameInput.value);
});

function sparkle(cell){
  for(let i=0;i<12;i++){
    const p=document.createElement("div");
    p.className="petal";
    p.style.setProperty("--x",(Math.random()*80-40)+"px");
    p.style.setProperty("--y",(Math.random()*80-40)+"px");
    p.style.left="50%";
    p.style.top="50%";
    cell.appendChild(p);
    setTimeout(()=>p.remove(),1000);
  }
}
</script>

</body>
</html>

